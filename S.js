const{protocol:e,host:t}=location,n=console,r=async(e,t)=>{let n=await fetch(t);if(n){let r=[200,301,304].includes(n.status);if(r){n.ok=r;let s=new Response(n.clone().body,n),a=n.headers.get("cache-control");if(a&&"no-cache"!==a){let t=/max-age=(\d+)/.exec(a);t&&(t=+t[1])>0&&s.headers.set("-",(e+t).toString(36))}caches.open(1).then(e=>e.put(t,s))}}return n},s=async(e,t)=>{let s=0;for(;;)try{return await r(e,t)}catch(e){if(s++>9)throw e;n.error(s,t,e)}};for(let[e,r]of Object.entries({install:e=>{e.waitUntil(skipWaiting())},activate:e=>{e.waitUntil(clients.claim())},fetch:e=>{let r=e.request,{url:a,method:i}=r;if(!(a.startsWith("http")&&["GET","OPTIONS"].includes(i)))return;let{host:c,pathname:o}=new URL(a);if(c!==t||o.includes(".")||(r=new Request("/",{method:i})),a.endsWith("/_")){e.respondWith(new Response("(async(I,f,D,v)=>{eval(await f(await f('.v'))),(await (await fetch(I+'.v')).text()).split(' ').map(e=>I+e).map((e,t)=>{let[a,i]=[['link',{rel:'stylesheet',href:e}],['script',{type:'module',crossorigin:'anonymous',src:e}]][t];D.head.appendChild(Object.assign(D.createElement(a),i))})})('//i18n.site/',async e=>(await fetch('//127.0.0.1:7776/'+e)).text(),document,0);",{headers:{"Content-Type":"text/javascript"}}));return}e.respondWith(caches.match(r).then(async e=>{let t;let a=parseInt(new Date/1e3);if(e)return parseInt(e.headers.get("-"),36)>a?e:new Promise(t=>{let n=setTimeout(()=>{t(e)},1e3);s(a,r).then(e=>{clearTimeout(n),t(e)})});try{t=await s(a,r)}catch(t){if(e)return n.error(t),e;throw t}return e&&e.ok&&!t.ok?e:t}))}}))addEventListener(e,r);